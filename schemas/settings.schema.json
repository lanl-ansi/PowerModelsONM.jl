{
  "meta:license": [
    "Copyright (c) 2020, Triad National Security, LLC.",
    "This code is provided under a BSD license as part of the Multi-Infrastructure Control",
    "and Optimization Toolkit (MICOT) project, LA-CC-13-108.",
    "You may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://github.com/lanl-ansi/PowerModelsONM.jl/blob/main/LICENSE.md"
  ],
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schemas/settings",
  "type": "object",
  "title": "Settings",
  "additionalProperties": false,
  "description": "Network settings to apply to the base network (_i.e._, all multinetwork timesteps, not a specific one), such as bus voltage bounds, load priorities, cold load pickup, and global settings such as maximum switch actions per timestep and time elapsed per time step.\n\n Additional properties on each object are allowed, but the object types are restricted to those in the ONM model.",
  "x-tags": [
    "input"
  ],
  "examples": [
    {
      "max_switch_actions": [
        1,
        1,
        1
      ],
      "time_elapsed": [
        0.1667,
        0.1667,
        0.1667
      ],
      "load": {
        "671": {
          "clpu_factor": 2
        }
      }
    }
  ],
  "properties": {
    "generator": {
      "type": "object",
      "description": "generation objects, excluding storage, which has different properties, indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "generation object",
          "properties": {
            "pg_lb": {
              "type": "array",
              "description": "real power lower bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg_ub": {
              "type": "array",
              "description": "real power upper bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg": {
              "type": "array",
              "description": "real power setpoint in kW",
              "items": {
                "type": "number"
              }
            },
            "qg_lb": {
              "type": "array",
              "description": "Reactive power lower bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg_ub": {
              "type": "array",
              "description": "Reactive power upper bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg": {
              "type": "array",
              "description": "Reactive power setpoint in kVar",
              "items": {
                "type": "number"
              }
            },
            "control_mode": {
              "type": "string",
              "description": "The control mode, _i.e._ `FREQUENCYDROOP` (grid-following) or `ISOCHRONOUS` (grid-forming)",
              "enum": [
                "FREQUENCYDROOP",
                "ISOCHRONOUS"
              ]
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "The status of the generation object, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "solar": {
      "type": "object",
      "description": "generation objects, excluding storage, which has different properties, indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "generation object",
          "properties": {
            "pg_lb": {
              "type": "array",
              "description": "real power lower bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg_ub": {
              "type": "array",
              "description": "real power upper bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg": {
              "type": "array",
              "description": "real power setpoint in kW",
              "items": {
                "type": "number"
              }
            },
            "qg_lb": {
              "type": "array",
              "description": "Reactive power lower bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg_ub": {
              "type": "array",
              "description": "Reactive power upper bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg": {
              "type": "array",
              "description": "Reactive power setpoint in kVar",
              "items": {
                "type": "number"
              }
            },
            "control_mode": {
              "type": "string",
              "description": "The control mode, _i.e._ `FREQUENCYDROOP` (grid-following) or `ISOCHRONOUS` (grid-forming)",
              "enum": [
                "FREQUENCYDROOP",
                "ISOCHRONOUS"
              ]
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "The status of the generation object, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "voltage_source": {
      "type": "object",
      "description": "generation objects, excluding storage, which has different properties, indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "generation object",
          "properties": {
            "pg_lb": {
              "type": "array",
              "description": "real power lower bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg_ub": {
              "type": "array",
              "description": "real power upper bounds in kW",
              "items": {
                "type": "number"
              }
            },
            "pg": {
              "type": "array",
              "description": "real power setpoint in kW",
              "items": {
                "type": "number"
              }
            },
            "qg_lb": {
              "type": "array",
              "description": "Reactive power lower bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg_ub": {
              "type": "array",
              "description": "Reactive power upper bounds in kVar",
              "items": {
                "type": "number"
              }
            },
            "qg": {
              "type": "array",
              "description": "Reactive power setpoint in kVar",
              "items": {
                "type": "number"
              }
            },
            "control_mode": {
              "type": "string",
              "description": "The control mode, _i.e._ `FREQUENCYDROOP` (grid-following) or `ISOCHRONOUS` (grid-forming)",
              "enum": [
                "FREQUENCYDROOP",
                "ISOCHRONOUS"
              ]
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "The status of the generation object, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "storage": {
      "type": "object",
      "description": "energy storage objects indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "energy storage object",
          "properties": {
            "energy_ub": {
              "type": "number",
              "description": "upper bound of energy that can be stored in kWhrs"
            },
            "status": {
              "type": "integer",
              "minimum": 0,
              "maximum": 1,
              "enum": [
                0,
                1
              ],
              "description": "the status of the asset, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "bus": {
      "type": "object",
      "description": "bus objects indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "bus object",
          "properties": {
            "microgrid_id": {
              "type": "string",
              "description": "identifier for which microgrid the bus belongs"
            },
            "vm_lb": {
              "type": "array",
              "description": "the voltage magnitude lower bounds in volts",
              "items": {
                "type": "number"
              }
            },
            "vm_ub": {
              "type": "array",
              "description": "the voltage magnitude upper bounds in volts",
              "items": {
                "type": "number"
              }
            },
            "vm": {
              "type": "array",
              "description": "the voltage magnitude setpoint of the bus, useful in cases where the bus should act as a reference, _e.g._, because a grid-forming inverter is connected",
              "items": {
                "type": "number"
              }
            },
            "va": {
              "type": "array",
              "description": "the voltage angle setpoint of the bus, useful in cases where the bus should act as a reference, _e.g._, because a grid-forming inverter is connected",
              "items": {
                "type": "number"
              }
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "maximum": 1,
              "minimum": 0,
              "description": "the status of the asset, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "load": {
      "type": "object",
      "description": "load objects indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "load object",
          "properties": {
            "clpu_factor": {
              "type": "number",
              "description": "cold load pickup factor"
            },
            "clpu_duration": {
              "type": "number",
              "description": "cold load pickup duration in ms"
            },
            "dispatchable": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "Indicator for whether the load is individually dispatchable (_i.e._, can the load be shed autonomously, as opposed to only be sheddable via block isolation)"
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "the status of the asset, _i.e._ enabled (`1`) or disabled (`0`)"
            },
            "priority": {
              "type": "number",
              "description": "The priority of the load, _i.e._ a numerical value to indicate how important it is that the load not be shed"
            }
          }
        }
      }
    },
    "line": {
      "type": "object",
      "description": "line objects indexed by name",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "line object",
          "properties": {
            "vad_lb": {
              "type": "array",
              "description": "voltage angle different lower bound in degrees",
              "items": {
                "type": "number"
              }
            },
            "vad_ub": {
              "type": "array",
              "description": "voltage angle difference upper bound in degrees",
              "items": {
                "type": "number"
              }
            },
            "cm_ub": {
              "type": "array",
              "description": "upper bounds on line currents in Amps",
              "items": {
                "type": "number"
              }
            },
            "cm_ub_b": {
              "type": "array",
              "description": "ncy upper bounds on line currents in Amps",
              "items": {
                "type": "number"
              }
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "the status of the asset, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "switch": {
      "type": "object",
      "description": "switch objects indexed by ",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "description": "switch object",
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "open",
                "closed"
              ],
              "description": "The default state of the switch, _i.e._, `open` or `closed`"
            },
            "dispatchable": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "is the switch autonomously operable by the ONM algorithm, _i.e._, yes (`1`) or no (`2`)"
            },
            "status": {
              "type": "integer",
              "enum": [
                0,
                1
              ],
              "minimum": 0,
              "maximum": 1,
              "description": "the status of the asset, _i.e._ enabled (`1`) or disabled (`0`)"
            }
          }
        }
      }
    },
    "max_switch_actions": {
      "type": [
        "array",
        "number"
      ],
      "description": "The maximum allowed switching actions per timestep (or at each timestep, if an array)",
      "items": {
        "type": "number"
      }
    },
    "time_elapsed": {
      "type": [
        "array",
        "number"
      ],
      "description": "The time elapsed, in hours for each timestep, or individually after each timestep if an array",
      "items": {
        "type": "number"
      }
    },
    "nlp_solver_tol": {
      "type": "number",
      "description": "The tolerance of the nlp solver"
    }
  }
}